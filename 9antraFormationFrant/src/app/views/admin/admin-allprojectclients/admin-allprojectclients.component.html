<main>
    <div class="d-lg-none d-md-block"><br><br><br></div>
    <div class="pagetitle">
      <h1>View All Project Client</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->


    <div class="data_table card1 mt-4 " style="overflow-y: scroll; height:600px;">
        <div class="select-container">
            <select class="form-select form-select-sm mb-3" aria-label=".form-select-sm example" [(ngModel)]="selectedStatus" (change)="onStatusChange()">
              <option value="" selected>All</option>
              <option value="true">Traitees</option>
              <option value="false">Non Traitees</option>
            </select>
          
            <select class="form-select form-select-sm mb-3" aria-label=".form-select-sm example" [(ngModel)]="selectedSortOrder" (change)="onSortOrderChange()">
              <option value="asc">Sort by Date (Ascending)</option>
              <option value="desc">Sort by Date (Descending)</option>
            </select>
            <select class="form-select form-select-sm mb-3" aria-label=".form-select-sm example" [(ngModel)]="selectedProjectId" (change)="onAdminChange()">
              <option value="" >All Project Admins</option>
              <option *ngFor="let project of aa" [value]="project.id">{{ project.titre }}</option>
            </select>
            
            
          </div>
         
          
        <table class="table align-middle mb-0 bg-white">
            <thead class="bg-light">
              <tr>
                <th>FullName</th>
                <th>Phone Number </th>
                <th>Mail</th>
                <th>Remark</th>
                <th>Date</th>
                <th>Project</th>

                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let projectClient of adminProjectId">
                <td>
                  <p class="text-muted mb-0">{{ projectClient.nom }}</p>
                </td>
                <td>
                  <p class="fw-normal mb-1">{{ projectClient.numtel }}</p>
                </td>
                <td>
                  <p class="fw-normal mb-1">{{ projectClient.email }}</p>
                </td>
                <td>
                  <p class="fw-normal mb-1">{{ projectClient.remark }}</p>
                </td>
                <td >
                    <p class="fw-normal mb-1">{{ projectClient.date | date: 'dd/MM/yy HH:mm' }}</p>
                    </td>
                    <td>
                        <div *ngFor="let project of projectClient.adminProjects">
                          <a [routerLink]="['/project-details', project.id]">{{ project.titre }}</a>
                        </div>
                      </td>
                      
                    <!-- <td>
                        <p class="fw-normal mb-1">{{ projectClient.status }}</p>
                      </td> -->
                      <td>      {{ projectClient.status  ? 'Traité' : 'Non traité' }}    </td>

                      <td>

                        <div class="form-check form-switch">
                            <input *ngIf="!projectClient.status" [disabled]="isUpdating" (click)="updateComplaintAndSendEmail(projectClient)"   (click)="onCheckboxClick($event)"class="form-check-input" type="checkbox" id="flexSwitchCheckDefault">
                            <label class="form-check-label" for="flexSwitchCheckDefault"></label>
                          </div>
                    </td>
              </tr>
              <tr *ngIf="adminProjectId.length === 0">
                <td colspan="5" class="text-center">No client projects found</td>
              </tr>
            </tbody>
          </table>
        
      </div>
      <br>
          <br>  
          <br>
          <br>

  </main><!-- End #main -->
  